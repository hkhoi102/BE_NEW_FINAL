# Server Configuration
server.port=8088
spring.application.name=order-service

# Database Configuration
spring.datasource.url=jdbc:mysql://localhost:3306/order_db?createDatabaseIfNotExist=true&useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:sapassword}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true
# Update schema automatically without dropping data
spring.jpa.properties.hibernate.hbm2ddl.auto=update
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Character Encoding
spring.jpa.properties.hibernate.connection.characterEncoding=utf8
spring.jpa.properties.hibernate.connection.CharSet=utf8
spring.jpa.properties.hibernate.connection.useUnicode=true

# Eureka Client Configuration
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.prefer-ip-address=true
eureka.instance.hostname=localhost
eureka.instance.port=8088
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.lease-renewal-interval-in-seconds=5
eureka.instance.lease-expiration-duration-in-seconds=10
eureka.client.registry-fetch-interval-seconds=5

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# Logging Configuration
logging.level.com.smartretail.orderservice=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Order Service Configuration
app.order.max-items-per-order=100
app.order.auto-cancel-hours=24
app.return.max-days-after-completion=30

# JWT Configuration
# IMPORTANT: Set JWT_SECRET via environment variable for production
# DO NOT commit real JWT secret to git!
app.jwt.secret=${JWT_SECRET:smartRetailJwtSecretKey_ChangeMe_ToA32BytesMin_StrongKey_2025}
app.jwt.expiration=86400000

# Service URLs (via API Gateway)
# These can be overridden via environment variables for Docker deployment
# In Docker, use service names like: http://api-gateway:8085
app.api-gateway.url=${API_GATEWAY_URL:http://localhost:8085}
app.product-service.url=${PRODUCT_SERVICE_URL:http://localhost:8085}
app.customer-service.url=${CUSTOMER_SERVICE_URL:http://localhost:8085}
app.promotion-service.url=${PROMOTION_SERVICE_URL:http://localhost:8085}
app.inventory-service.url=${INVENTORY_SERVICE_URL:http://localhost:8085}

# Feign Client URLs (used by @FeignClient annotations)
product.service.url=${PRODUCT_SERVICE_URL:http://localhost:8085}
promotion.service.url=${PROMOTION_SERVICE_URL:http://localhost:8085}
inventory.service.url=${INVENTORY_SERVICE_URL:http://localhost:8085}
user.service.url=${USER_SERVICE_URL:http://localhost:8085}
customer.service.url=${CUSTOMER_SERVICE_URL:http://localhost:8085}

# Email Configuration (SMTP)
# IMPORTANT: Set email credentials via environment variables for production
# DO NOT commit real email password to git!
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.from=${MAIL_FROM:}
